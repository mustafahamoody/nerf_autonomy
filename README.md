# nerf_autonomy
The Complete Repository for Autonomous Robot Navigation using Neural Radiance Fields (NeRFs). With quick and easy setup using Docker. 

Use ***torch-ngp-container*** to transform captured photos or a video of an environment into an accurately scaled digital model. \
Then, use ***nerf_ws*** to set up collision-free path planning and controls using ROS2 for real-time autonomous navigation in the environment, with your robot.

## nerf_autonomy Setup
This section covers how to install and set up nerf_autonomy 
-- To creating your own NeRF, and configure the ROS2 Nodes on it, please refer to the *help* folder

#### Requirements:
- System with an NVIDIA GPU (CUDA Capable System)
- At Least 80 GB of free space (For Docker Containers and Data)
- Install and setup [Docker](https://www.docker.com/) 
- Install the [NVIDIA Container Toolkit](https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html) for containers to have access to GPU
- Install [ROS2 Humble](https://docs.ros.org/en/humble/Installation.html)


Begin by cloning this repository
```
$ git clone https://github.com/mustafahamoody/nerf_autonomy
$ cd nerf_autonomy
```

Build and run the Docker Containers **using Docker Compose**. Make sure the containers run as detached (-d flag) \
*This process may take a while depending on your system (15 - 30 mins +) * 
```
nerf_autonomy$ cd docker
nerf_autonomy/docker$ docker compose up -d # This will build and start both containers
```

*Note for Linux Systems*: If you recieve a permission denied error, you may need to add your user to the docker group to access the docker daemon. 
-- For more information see [this](https://docs.docker.com/engine/install/linux-postinstall/)
```
$ sudo groupadd docker
$ sudo usermod -aG docker $USER
# Restart your system for changes to take effect. Then run docker compose up -d again
```

Enter the running container:
```
# To enter torch-ngp-container: For environment creation
nerf_autonomy/docker$ docker compose exec torch-ngp-container bash
```
```
# To enter nerf_ws: For starting ROS2 navigation nodes
nerf_autonomy/docker$ docker compose exec nerf_ws bash 
```

You are now ready to create your own NeRF environments and use them for autonomous navigation!

## Additional Setup

- To visualize the created NeRF environment using the torch-ngp GUI, **you must connect your host machine display to the docker container** using an X11 Server \
**For Linux Systems**:
```
# 1. Install X11 Server
sudo apt-get install xorg openbox

# 2. Allow Docker to access your X server
xhost +local:docker
```
**For Windows Systems -- UNTESTED**:
1. Download and install [VcXsrv](https://sourceforge.net/projects/vcxsrv/)
2. Run XLaunch and configure:
3. Select "Multiple windows" mode.
4. Select "Start no client".
5. Enable "Disable access control" (optional, but helps with debugging).
6. Click "Finish" to start the server.

- To view the voxel, occupancy grid and path plan generated by nerf_ws (ROS2 Nodes) for your NeRF Environment, **Setup a [foxglove](https://foxglove.dev/) account and complete the steps below**
1. Install ROS Foxglove bridge
```
sudo apt install ros-humble-foxglove-bridge
```
2. On the Foxglove website, Open connection using WebSocket. **Please ensure your WebSocket URL matches: ws://localhost:8765**


## Demo
To demo nerf_autonomy and ensure everything is working 
